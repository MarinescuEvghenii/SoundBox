var SoundBox;SoundBox=function(){function a(){}return a.defaults={flashOnly:!1,flashUrl:"./assets/dist/swf/player.swf",flashObjectId:"soundbox-player",flashHtml:'<object id="%id%" width="0" height="0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" type="application/x-shockwave-flash" data="%url%">                      <param name="movie" value="%url%">                      <param name="allowScriptAccess" value="sameDomain">                      <embed name="%id%" width="0" height="0" type="application/x-shockwave-flash" src="%url%" allowScriptAccess="sameDomain">                    </object>'},a.callbacks={onProgress:function(){},onTimeupdate:function(){},onVolumeChange:function(){},onPlay:function(){},onPause:function(){},onError:function(){}},a.util={toPercent:function(a,b,c){var d;return null==c&&(c=0),d=Math.pow(10,c),Math.round(100*a/b*d)/d},fromPercent:function(a,b,c){var d;return null==c&&(c=0),d=Math.pow(10,c),Math.round(b/100*a*d)/d},humanizeTimer:function(a,b){var c,d,e;return c=Math.floor(a/3600),10>c&&(c="0"+c),d=b?Math.floor(a/60%60):Math.floor(a/60),10>d&&(d="0"+d),e=Math.floor(a%60),10>e&&(e="0"+e),b?c+":"+d+":"+e:d+":"+e}},a.Sound=function(){function b(){var b=this;this.playTypes={flash:0,audio:1},this.audio=new a.Audioz({onProgress:a.callbacks.onProgress,onPlay:a.callbacks.onPlay,onPause:a.callbacks.onPause,onTimeupdate:a.callbacks.onTimeupdate,onVolumeChange:a.callbacks.onVolumeChange,onError:a.callbacks.onError}),this.audio.isMP3Supported()&&!a.defaults.flashOnly?this.playType=this.playTypes.audio:(this.playType=this.playTypes.flash,this.appendFlash(),a.callbacks.onReady=function(){return b.flash=b.getFlashObject(),b.flash.set("src","")})}return b.prototype.appendFlash=function(){var b,c;return c=a.defaults.flashHtml.replace(/("%url%")/g,a.defaults.flashUrl+"?v="+Math.random()).replace(/("%id%")/g,a.defaults.flashObjectId),b=document.createElement("div"),b.innerHTML=c,document.getElementsByTagName("body")[0].appendChild(b)},b.prototype.getFlashObject=function(){return-1===navigator.appName.indexOf("Microsoft")?document[a.defaults.flashObjectId]:window[a.defaults.flashObjectId]},b.prototype.play=function(a){return a?this.playType===this.playTypes.flash?(this.flash.set("src",a),this.flash.play()):(this.audio.set("src",a),this.audio.play()):this.audio.play()},b.prototype.stop=function(){return this.playType===this.playTypes.flash?this.flash.stop():this.audio.stop()},b.prototype.togglePause=function(){return this.playType===this.playTypes.flash?this.flash.pause():this.audio.pause()},b.prototype.toggleMute=function(){return this.playType===this.playTypes.flash?this.flash.mute():this.audio.mute()},b.prototype.seek=function(a){return this.get("src")?this.set("currentTime",a):void 0},b.prototype.set=function(a,b){return this.playType===this.playTypes.flash?this.flash.set(a,b):this.audio.set(a,b)},b.prototype.get=function(a){return this.playType===this.playTypes.flash?this.flash.get(a):this.audio.get(a)},b}(),a.Audioz=function(){function a(a){this.audio=new Audio,this.options=a,this.events()}return a.prototype.events=function(){var a=this;return this.audio.addEventListener("timeupdate",function(){return"function"==typeof a.options.onTimeupdate?a.options.onTimeupdate(a.get("currentTime")):void 0}),this.audio.addEventListener("progress",function(){var b,c;return"function"==typeof a.options.onProgress&&(b=a.timerangeToArray(a.get("buffered")),b.length>0)?(c=Math.round(100*(b[b.length-1].end/a.get("duration"))),a.options.onProgress(c)):void 0}),this.audio.addEventListener("volumechange",function(){return"function"==typeof a.options.onVolumeChange?a.options.onVolumeChange(a.get("volume")):void 0}),this.audio.addEventListener("error",function(){return"function"==typeof a.options.onError?a.options.onError(a.get("error")):void 0}),this.audio.addEventListener("play",function(){return"function"==typeof a.options.onPlay?a.options.onPlay():void 0}),this.audio.addEventListener("pause",function(){return"function"==typeof a.options.onPause?a.options.onPause():void 0})},a.prototype.play=function(){return this.audio.play()},a.prototype.stop=function(){return this.audio.pause(),this.audio.currentTime=0},a.prototype.mute=function(){return this.audio.muted=!this.audio.muted},a.prototype.pause=function(){return this.audio.paused?this.audio.play():this.audio.pause()},a.prototype.set=function(a,b){return this.audio[a]=b,this},a.prototype.get=function(a){return this.audio[a]},a.prototype.timerangeToArray=function(a){var b,c,d,e;for(b=[],d=a.length-1,c=e=0;d>=0?d>=e:e>=d;c=d>=0?++e:--e)b.push({start:a.start(c),end:a.end(c)});return b},a.prototype.isSupported=function(){return!!this.audio.canPlayType},a.prototype.isOGGSupported=function(){return!!this.audio.canPlayType&&!!this.audio.canPlayType('audio/ogg; codecs="vorbis"')},a.prototype.isWAVSupported=function(){return!!this.audio.canPlayType&&!!this.audio.canPlayType('audio/wav; codecs="1"')},a.prototype.isMP3Supported=function(){return!!this.audio.canPlayType&&!!this.audio.canPlayType("audio/mpeg;")},a.prototype.isAACSupported=function(){return!(!this.audio.canPlayType||!this.audio.canPlayType("audio/x-m4a;")&&!this.audio.canPlayType("audio/aac;"))},a}(),a}(),new SoundBox;